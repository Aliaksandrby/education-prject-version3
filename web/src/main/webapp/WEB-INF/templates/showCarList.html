<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="UTF-8">
    <title>CarList panel</title>
    <link th:href="@{/resources/css/carList.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/resources/css/teg_a.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/resources/css/paging.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/resources/css/button.css}" rel="stylesheet" type="text/css">
</head>
<body>
<div th:replace="fragments::logout"></div>
<div class="container" sec:authorize="isAuthenticated()==false">
    <form class="form-signin" method="post" th:action="@{/login.html}">
        <button class="btn btn-lg btn-primary btn-block" type="submit">login</button>
    </form>
</div>
<div class="container" sec:authorize="isAuthenticated()==false">
    <form class="form-signin" method="post" th:action="@{/registration.html}">
        <button class="btn btn-lg btn-primary btn-block" type="submit">registration</button>
    </form>
</div>
<div sec:authorize="hasRole('ROLE_ADMIN')">
    <h1 align="center"><button><a th:href="@{/admin/add/car.html}">add car</a></button></h1>
    <h1 align="center"><button><a th:href="@{/admin/editViewUsers.html}">edit/view users</a></button></h1>
    <h1 align="center"><button><a th:href="@{/admin/editViewOrders.html}">edit/view orders</a></button></h1>
    <h1 align="center"><button><a th:href="@{/admin/editViewPayments.html}">edit/view payments</a></button></h1>
</div>
<div align="center" th:each="car : ${carList}">
    <div id="avrDiv" class="warning">
        <a th:href="@{/car/{id}.html(id=${car.id})}">
            <div align="center">
                <img th:src="${car.imageCarList.get(0).image.equals('')} ?
                    @{/resources/img/noAuto.png} : ${'data:image/jpeg;base64,'+{car.imageCarList.get(0).image}}">
            </div>
            <p th:text="${car.name}"></p>
            <div align="center">
                year: <span th:text="${car.year}"></span><br>
                engine description: <span th:text="${car.engineDescription}"></span><br>
                transmission: <span th:text="${car.transmission}"></span><br>
                price: <span th:text="${car.price}"></span><br><br>
            </div>
        </a>
    </div><br>
</div>
<div class="center">
    <div class="pagination">
        <a th:text="${currentPage > 1} ? '&laquo;':''"
           th:href="${currentPage == 1} ? '' : @{/{count}.html(count=${currentPage-1})}"></a>
        <a th:each="i : ${#numbers.sequence(startPage, endPage)}"
           th:href="@{/{i}.html(i=${i})}"
           th:class="${i==currentPage && numberOfPages > 1} ? 'active'"
           th:text="${numberOfPages < 2} ? '': ${i}"></a>
        <a th:text="${currentPage < numberOfPages} ? '&raquo;':''"
           th:href="${currentPage < numberOfPages} ? @{/{count}.html(count=${currentPage+1})}"></a>
    </div>
</div>
</body>
</html>